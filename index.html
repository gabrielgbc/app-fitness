<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fitness Calculator ‚Äî Gabriel Cirelli</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{--glass: rgba(255,255,255,0.06);--card: rgba(255,255,255,0.04)}
    html,body{height:100%}
    body{background:linear-gradient(135deg,#0f172a 0%,#4c1d95 60%);font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}
    .glass{background:var(--glass);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,0.06)}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.04)}
    .brand-badge{background:linear-gradient(90deg,#7c3aed,#ec4899);box-shadow:0 6px 18px rgba(124,58,237,0.18)}
    @keyframes floaty{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
    .float{animation:floaty 3s ease-in-out infinite}
  </style>
</head>
<body class="min-h-screen text-slate-100">
  <nav class="w-full py-4 px-6 flex items-center justify-between glass">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 rounded-lg flex items-center justify-center brand-badge">
        <svg class="w-7 h-7 text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L2 7v6c0 5 5 9 10 9s10-4 10-9V7l-10-5z" stroke="white" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </div>
      <div>
        <h1 class="text-lg font-semibold">Fitness Calculator</h1>
        <p class="text-xs text-slate-300">by Gabriel Cirelli</p>
      </div>
    </div>
    <div class="flex items-center gap-3">
      <button id="btnHome" onclick="showScreen('home')" class="px-3 py-2 rounded-md text-sm hover:bg-white/5">In√≠cio</button>
      <button onclick="showScreen('bike')" class="px-3 py-2 rounded-md text-sm hover:bg-white/5">Ciclismo</button>
      <button onclick="showScreen('tread')" class="px-3 py-2 rounded-md text-sm hover:bg-white/5">Esteira</button>
    </div>
  </nav>

  <main class="max-w-6xl mx-auto p-6 grid grid-cols-1 lg:grid-cols-12 gap-6">
    <!-- Left: screens -->
    <section class="lg:col-span-8">
      <!-- HOME -->
      <div id="home" class="card rounded-2xl p-8 shadow-xl">
        <div class="flex flex-col lg:flex-row gap-6 items-center">
          <div class="flex-1">
            <h2 class="text-4xl font-extrabold mb-2">üí™ Calcule seus treinos ‚Äî r√°pido e preciso</h2>
            <p class="text-slate-300">Escolha entre ciclismo e esteira, informe seus dados e veja calorias, dist√¢ncia, METs e estimativa de gordura perdida.</p>

            <div class="mt-6 grid sm:grid-cols-2 gap-4">
              <button onclick="showScreen('bike')" class="w-full py-3 rounded-xl bg-gradient-to-r from-blue-600 to-cyan-500 shadow-lg">üö¥ Ir para Ciclismo</button>
              <button onclick="showScreen('tread')" class="w-full py-3 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 shadow-lg">üèÉ Ir para Esteira</button>
            </div>

            <div class="mt-6 text-sm text-slate-300">Salve seus resultados localmente e acesse o hist√≥rico pelo rodap√©.</div>
          </div>

          <div class="w-56 h-56 rounded-2xl flex items-center justify-center float">
            <div class="w-full h-full rounded-2xl glass flex flex-col items-center justify-center p-4">
              <div class="text-3xl">üî•</div>
              <div class="mt-2 text-sm text-slate-200 text-center">Monitore calorias, METs e progresso</div>
            </div>
          </div>
        </div>

        <div class="mt-8 grid sm:grid-cols-3 gap-4">
          <div class="p-4 rounded-xl glass">
            <h3 class="font-semibold">C√°lculos baseados em METs</h3>
            <p class="text-xs text-slate-300">Usamos MET √ó peso(kg) √ó tempo(h) para estimar calorias.</p>
          </div>
          <div class="p-4 rounded-xl glass">
            <h3 class="font-semibold">F√°cil de usar</h3>
            <p class="text-xs text-slate-300">Interface responsiva pensada para uso r√°pido no celular.</p>
          </div>
          <div class="p-4 rounded-xl glass">
            <h3 class="font-semibold">Privado</h3>
            <p class="text-xs text-slate-300">Seus dados ficam somente no seu navegador (localStorage).</p>
          </div>
        </div>
      </div>

      <!-- BIKE -->
      <div id="bike" class="hidden card rounded-2xl p-6 shadow-xl">
        <div class="flex items-center justify-between">
          <div>
            <h2 class="text-2xl font-bold">üö¥ Calculadora de Ciclismo</h2>
            <p class="text-sm text-slate-300">Calcule calorias, METs, velocidade m√©dia e estimativa de gordura perdida.</p>
          </div>
          <div class="text-sm text-slate-400">Dica: preencha dist√¢ncia ou tempo + intensidade</div>
        </div>

        <div class="mt-6 grid md:grid-cols-2 gap-4">
          <div class="space-y-4">
            <label class="text-xs">Seu peso (kg)</label>
            <input id="bike_weight" type="number" min="1" placeholder="70" class="w-full p-3 rounded-md bg-transparent border border-white/10" />

            <label class="text-xs">Peso da bicicleta (kg) ‚Äî opcional</label>
            <input id="bike_bikeweight" type="number" min="0" placeholder="12" class="w-full p-3 rounded-md bg-transparent border border-white/10" />

            <label class="text-xs">Tempo (min)</label>
            <input id="bike_time" type="number" min="1" placeholder="45" class="w-full p-3 rounded-md bg-transparent border border-white/10" />

            <label class="text-xs">Dist√¢ncia (km) ‚Äî opcional</label>
            <input id="bike_distance" type="number" min="0" step="0.1" placeholder="15" class="w-full p-3 rounded-md bg-transparent border border-white/10" />

            <label class="text-xs">Intensidade</label>
            <select id="bike_intensity" class="w-full p-3 rounded-md bg-transparent border border-white/10">
              <option value="light">Leve</option>
              <option value="moderate" selected>Moderado</option>
              <option value="intense">Intenso</option>
              <option value="very">Muito Intenso</option>
            </select>

            <div class="flex gap-3 mt-2">
              <button onclick="calculateBike()" class="px-4 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-cyan-500">Calcular</button>
              <button onclick="saveLast('bike')" class="px-4 py-2 rounded-lg bg-white text-slate-900">Salvar</button>
            </div>
          </div>

          <div class="space-y-4">
            <div class="p-4 rounded-lg card">
              <h4 class="font-semibold">Resultados</h4>
              <div class="mt-3">
                <div class="text-sm text-slate-300">Calorias</div>
                <div class="text-2xl font-bold" id="bike_calories">0 kcal</div>
              </div>
              <div class="mt-3">
                <div class="text-sm text-slate-300">MET</div>
                <div id="bike_met" class="font-bold">0</div>
              </div>
              <div class="mt-3">
                <div class="text-sm text-slate-300">Velocidade m√©dia</div>
                <div id="bike_speed" class="font-bold">‚Äî km/h</div>
              </div>
              <div class="mt-3">
                <div class="text-sm text-slate-300">Gordura estimada</div>
                <div id="bike_fat" class="font-bold">0 g</div>
              </div>
            </div>

            <div class="p-4 rounded-lg glass text-sm">
              <strong>Dica:</strong> 1 kg de gordura ‚âà 7700 kcal.
            </div>
          </div>
        </div>
      </div>

      <!-- TREADMILL -->
      <div id="tread" class="hidden card rounded-2xl p-6 shadow-xl">
        <div class="flex items-center justify-between">
          <div>
            <h2 class="text-2xl font-bold">üèÉ Calculadora de Esteira</h2>
            <p class="text-sm text-slate-300">Informe velocidade (mph), inclina√ß√£o (%) e tempo para estimativas.</p>
          </div>
          <div class="text-sm text-slate-400">Velocidade em MPH (1 mph ‚âà 1.609 km/h)</div>
        </div>

        <div class="mt-6 grid md:grid-cols-2 gap-4">
          <div class="space-y-4">
            <label class="text-xs">Seu peso (kg)</label>
            <input id="tread_weight" type="number" min="1" placeholder="70" class="w-full p-3 rounded-md bg-transparent border border-white/10" />

            <label class="text-xs">Tempo (min)</label>
            <input id="tread_time" type="number" min="1" placeholder="30" class="w-full p-3 rounded-md bg-transparent border border-white/10" />

            <label class="text-xs">Velocidade (mph)</label>
            <input id="tread_speed" type="number" step="0.1" min="0" placeholder="6" class="w-full p-3 rounded-md bg-transparent border border-white/10" />

            <label class="text-xs">Inclina√ß√£o (%)</label>
            <input id="tread_incline" type="number" step="0.5" min="0" placeholder="1.5" class="w-full p-3 rounded-md bg-transparent border border-white/10" />

            <div class="flex gap-3 mt-2">
              <button onclick="calculateTread()" class="px-4 py-2 rounded-lg bg-gradient-to-r from-orange-500 to-red-500">Calcular</button>
              <button onclick="saveLast('tread')" class="px-4 py-2 rounded-lg bg-white text-slate-900">Salvar</button>
            </div>
          </div>

          <div class="space-y-4">
            <div class="p-4 rounded-lg card">
              <h4 class="font-semibold">Resultados</h4>
              <div class="mt-3">
                <div class="text-sm text-slate-300">Calorias</div>
                <div class="text-2xl font-bold" id="tread_calories">0 kcal</div>
              </div>
              <div class="mt-3">
                <div class="text-sm text-slate-300">MET</div>
                <div id="tread_met" class="font-bold">0</div>
              </div>
              <div class="mt-3">
                <div class="text-sm text-slate-300">Dist√¢ncia</div>
                <div id="tread_distance" class="font-bold">0 km</div>
              </div>
              <div class="mt-3">
                <div class="text-sm text-slate-300">Peso perdido</div>
                <div id="tread_weightlost" class="font-bold">0 kg</div>
              </div>
            </div>

            <div class="p-4 rounded-lg glass text-sm">
              <strong>Nota:</strong> Valores s√£o estimativas educadas ‚Äî consulte um profissional para dados cl√≠nicos.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Right: history & credits -->
    <aside class="lg:col-span-4">
      <div class="card rounded-2xl p-4 shadow-xl">
        <h3 class="font-semibold">Hist√≥rico (Local)</h3>
        <div id="historyList" class="mt-3 space-y-2 text-sm text-slate-300 max-h-64 overflow-auto"></div>
        <div class="mt-4 flex gap-2">
          <button onclick="loadHistory()" class="flex-1 py-2 rounded-md bg-white text-slate-900">Recarregar</button>
          <button onclick="clearHistory()" class="py-2 px-3 rounded-md bg-red-600">Limpar</button>
        </div>
      </div>

      <div class="mt-4 card rounded-2xl p-4">
        <h3 class="font-semibold">Sobre</h3>
        <p class="text-sm text-slate-300 mt-2">App desenvolvido por <strong>Gabriel Cirelli</strong>. Interface leve, offline e responsiva.</p>
        <p class="text-xs text-slate-400 mt-3">Abra este arquivo no navegador para usar.</p>
      </div>

      <div class="mt-4 p-4 rounded-2xl glass">
        <h4 class="font-semibold">Como usar</h4>
        <ol class="text-sm text-slate-300 mt-2 list-decimal pl-4 space-y-1">
          <li>Escolha a aba (Ciclismo/Esteira).</li>
          <li>Preencha peso e tempo. Opcionalmente dist√¢ncia ou inclina√ß√£o.</li>
          <li>Clique em Calcular. Salve para hist√≥rico local.</li>
        </ol>
      </div>
    </aside>
  </main>

  <footer class="w-full py-4 text-center text-xs text-slate-400">¬© <span id="year"></span> Gabriel Cirelli ‚Äî Fitness Calculator</footer>

  <script>
    // small helpers
    const el = id => document.getElementById(id);
    document.getElementById('year').textContent = new Date().getFullYear();

    function showScreen(name){
      ['home','bike','tread'].forEach(s=> el(s).classList.add('hidden'));
      el(name).classList.remove('hidden');
      // scroll to top of main content
      window.scrollTo({top:0,behavior:'smooth'});
    }

    // show home on load
    showScreen('home');

    // --- BIKE ---
    function calculateBike(){
      const weight = parseFloat(el('bike_weight').value) || 0;
      const bikeW = parseFloat(el('bike_bikeweight').value) || 0;
      const minutes = parseFloat(el('bike_time').value) || 0;
      const distance = parseFloat(el('bike_distance').value) || 0;
      const intensity = el('bike_intensity').value;

      if (weight <= 0 || minutes <= 0){ alert('Preencha peso e tempo v√°lidos.'); return; }

      // MET mapping (approx)
      const mets = { light:4.0, moderate:6.0, intense:8.0, very:10.0 };
      const met = mets[intensity] || 6;

      const hours = minutes/60;
      const calories = Math.round(met * weight * hours);

      // speed if distance provided
      let kmh = null;
      if (distance > 0){ kmh = (distance / hours); }
      // fat estimation: assume 30% of energy comes from fat at moderate effort -> g = kcal*0.3 / 9
      const fatGrams = Math.round((calories * 0.30)/9);

      el('bike_calories').textContent = calories + ' kcal';
      el('bike_met').textContent = met.toFixed(1);
      el('bike_speed').textContent = kmh ? kmh.toFixed(1) + ' km/h' : '‚Äî km/h';
      el('bike_fat').textContent = fatGrams + ' g';

      // store last computed
      el('bike_calories').dataset.value = calories;
      addToTempDisplay('bike', {calories,met,fatGrams,kmh,minutes,distance,weight,bikeW});
    }

    // --- TREADMILL ---
    function calculateTread(){
      const weight = parseFloat(el('tread_weight').value) || 0;
      const minutes = parseFloat(el('tread_time').value) || 0;
      const mph = parseFloat(el('tread_speed').value) || 0;
      const incline = parseFloat(el('tread_incline').value) || 0;

      if (weight <=0 || minutes <=0 || mph <=0){ alert('Preencha peso, tempo e velocidade v√°lidos.'); return; }

      const hours = minutes/60;
      // estimate MET based on speed (rough):
      let met = 3.5; // default light
      if (mph < 3) met = 3.5;
      else if (mph < 4) met = 4.5;
      else if (mph < 5) met = 6.0;
      else if (mph < 6) met = 8.0;
      else met = 10.0;
      // incline influence: each percent adds ~0.03 MET
      met += incline * 0.03;

      const calories = Math.round(met * weight * hours);

      // distance in km = mph * hours * 1.60934
      const distanceKm = (mph * hours * 1.60934);
      const weightLostKg = +(calories / 7700).toFixed(3);

      el('tread_calories').textContent = calories + ' kcal';
      el('tread_met').textContent = met.toFixed(1);
      el('tread_distance').textContent = distanceKm.toFixed(2) + ' km';
      el('tread_weightlost').textContent = weightLostKg + ' kg';

      addToTempDisplay('tread', {calories,met,distanceKm,minutes,mph,incline,weight});
    }

    // --- TEMP DISPLAY & HISTORY ---
    function addToTempDisplay(type,obj){
      // attach to ephemeral element
      const time = new Date().toLocaleString();
      const entry = {type,time,data:obj};
      // show in top-right history quickly
      const list = el('historyList');
      const node = document.createElement('div');
      node.className = 'p-3 rounded-md bg-white/3 text-xs';
      node.innerHTML = `<strong>${type.toUpperCase()}</strong> ‚Äî ${time}<div class='text-2xs mt-1 opacity-80'>${summaryFor(entry)}</div>`;
      list.prepend(node);

      // save to localStorage history
      const history = JSON.parse(localStorage.getItem('fc_history')||'[]');
      history.unshift(entry);
      // keep last 50
      if (history.length>50) history.length=50;
      localStorage.setItem('fc_history', JSON.stringify(history));
    }

    function summaryFor(entry){
      if (entry.type==='bike'){
        return `${entry.data.calories} kcal ‚Ä¢ MET ${entry.data.met} ‚Ä¢ ${entry.data.kmh? entry.data.kmh.toFixed(1)+' km/h':''}`;
      } else {
        return `${entry.data.calories} kcal ‚Ä¢ ${entry.data.distanceKm? entry.data.distanceKm.toFixed(2)+' km':''}`;
      }
    }

    function loadHistory(){
      const history = JSON.parse(localStorage.getItem('fc_history')||'[]');
      const list = el('historyList');
      list.innerHTML='';
      if (!history.length){ list.innerHTML = '<div class="text-sm text-slate-400">Nenhum hist√≥rico salvo.</div>'; return; }
      history.forEach(h => {
        const d = document.createElement('div');
        d.className='p-3 rounded-md bg-white/3 text-xs';
        d.innerHTML = `<strong>${h.type.toUpperCase()}</strong> ‚Äî ${h.time}<div class='opacity-80 mt-1 text-2xs'>${summaryFor(h)}</div>`;
        list.appendChild(d);
      });
    }

    function clearHistory(){ if (confirm('Limpar hist√≥rico local?')){ localStorage.removeItem('fc_history'); loadHistory(); } }

    function saveLast(type){
      // add currently displayed result to history (if exists)
      if (type==='bike'){
        const value = el('bike_calories').dataset.value;
        if (!value) { alert('Calcule antes de salvar.'); return; }
        // already saved on calculate, so just notify
        alert('Resultado de ciclismo salvo no hist√≥rico.');
      } else {
        const value = el('tread_calories').textContent;
        if (!value || value === '0 kcal'){ alert('Calcule antes de salvar.'); return; }
        alert('Resultado de esteira salvo no hist√≥rico.');
      }
      loadHistory();
    }

    // init
    loadHistory();

    // keyboard support: Enter = calculate on focused input
    document.addEventListener('keydown', (e)=>{
      if (e.key==='Enter'){
        const visible = document.querySelector('#bike:not(.hidden), #tread:not(.hidden), #home:not(.hidden)');
        if (visible && visible.id==='bike') calculateBike();
        if (visible && visible.id==='tread') calculateTread();
      }
    });
  </script>
</body>
</html>
